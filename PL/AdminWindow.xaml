<Window x:Class="PL.Volunteer.AdminWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL"
        mc:Ignorable="d"
        Title="Admin Window" Loaded="AdminWindow_Loaded" Closed="AdminWindow_Closed" 
        Height="500" Width="900"
        Background="AliceBlue" FontFamily="Segoe UI">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- כותרת -->
        <TextBlock Text="Welcome!" FontSize="24" FontWeight="Bold" Foreground="Green" 
                   HorizontalAlignment="Center" Margin="0,10,0,20" Grid.ColumnSpan="2"/>

        <!-- תוכן ראשי -->
        <StackPanel Grid.Column="0" Margin="10">
            <!-- כפתורי ניהול זמן -->
            <GroupBox Header="Time Management" Margin="5">
                <StackPanel>
                    <Label Content="Simulation Interval (minutes)" VerticalAlignment="Center" Margin="5"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="+1 Min" Margin="5" Click="btnAddOneMinute_Click" Width="100"/>
                        <Button Content="+1 Hour" Margin="5" Click="btnAddOneHour_Click" Width="100"/>
                        <Button Content="+1 Day" Margin="5" Click="btnAddOneDay_Click" Width="100"/>
                        <Button Content="+1 Month" Margin="5" Click="btnAddOneMonth_Click" Width="100"/>
                        <Button Content="+1 Year" Margin="5" Click="btnAddOneYear_Click" Width="100"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Risk Time Span -->
            <GroupBox Header="Risk Time Span" Margin="5">
                <StackPanel>
                    <TextBox Text="{Binding MaxYearRange, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5"/>
                    <Button Content="Update Risk Time Span" Click="UpdateMaxRange_Click" Width="200" Margin="5"/>
                </StackPanel>
            </GroupBox>

            <!-- כפתורי ניהול בסיסיים -->
            <GroupBox Header="Database Management" Margin="5">
                <StackPanel>
                    <Button Content="Initialize Database" Width="200" Margin="5" Click="InitializeDB_Click"/>
                    <Button Content="Reset Database" Width="200" Margin="5" Click="ResetDB_Click"/>
                    <Button Content="Start Simulator" Width="200" Margin="5" Click="btnStrSimulat_Click"/>
                </StackPanel>
            </GroupBox>

            <!-- עדכון זמן הסימולציה -->
            <GroupBox Header="Simulation Interval Update" Margin="5">
                <StackPanel>
                    <TextBox Text="{Binding MaxYearRange, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5"/>
                    <Button Content="Update Simulation Interval" Click="SimulationTime_Click" Width="200" Margin="5"/>
                </StackPanel>
            </GroupBox>

            <!-- כפתורים לניהול מתנדבים וקריאות -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                <Button Content="Volunteer Management" Width="200" Margin="5" Click="btnVolManage_Click"/>
                <Button Content="Calls Management" Width="200" Margin="5" Click="btnCallManage_Click"/>
            </StackPanel>

            <!-- הצגת השעון -->
            <Label Content="{Binding CurrentTime}" HorizontalAlignment="Center"
                   VerticalAlignment="Top" Margin="10" FontSize="16" FontWeight="Bold"/>
        </StackPanel>

        <!-- DataGrid בצד ימין -->
        <StackPanel Grid.Column="1" Margin="10">
            <TextBlock Text="Call Status Summary" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
            <DataGrid Name="dgCallStatus" ItemsSource="{Binding CallStatusSummaries}"
                      AutoGenerateColumns="False" MouseDoubleClick="DataGrid_MouseDoubleClick"
                      Margin="5" Width="Auto" Height="300"
                      HorizontalAlignment="Stretch" VerticalAlignment="Top">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="2*" />
                    <DataGridTextColumn Header="Count" Binding="{Binding TotalAssignments}" Width="*" />
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>
    </Grid>
</Window>
